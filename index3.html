<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movable Divs Example</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet">
</head>

<body>

    <div class="container-fluid">
        <div class="areaListas d-flex"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
    <script src="criarDiv.js"></script>
    <script>

        class CriadorDiv {
            constructor(container) {
                this.container = $(container);
            }

            criandoDivs(id, titulo, caixa) {
                this.container.append(`
            <div id="div${id}" class="large-container d-grid">
                <p class="m-0 p-0 w-100 bg-light text-center titulo">${titulo}</p>
                <div id="smallBoxlarge${id}" class="small-box w-100">${caixa}</div>
            </div>
        `)
            }
        }

        const criandoDiv = new CriadorDiv('.areaListas');
        for (let i = 0; i < 5; i++) {
            criandoDiv.criandoDivs(`${i}`, `titulo${i}`, `caixa${i}`)
        }


        $(function () {
            // Movendo as divs grandes horizontalmente
            $(".areaListas").sortable({
                axis: "x", // Permite apenas movimento horizontal
                placeholder: "ui-state-highlight", // Placeholder visual durante a movimentação
                update: function (event, ui) {
                    // Aqui você pode manipular a nova ordem das divs, se necessário
                    var ordemIds = $('.areaListas').sortable('toArray');
                    console.log(ordemIds); // Exibe a nova ordem no console
                }
            });

            // Movendo as pequenas divs dentro das grandes divs
            $(".small-box").draggable({
                revert: "invalid", // Retorna à posição original se não for largada em um destino válido
                helper: "clone", // Cria um clone enquanto arrasta
                start: function (event, ui) {
                    $(this).addClass("small-highlight");
                },
                stop: function (event, ui) {
                    $(this).removeClass("small-highlight");
                }
            });

            $(".large-container").droppable({
                accept: ".small-box", // Aceita apenas as pequenas divs
                tolerance: "intersect",
                drop: function (event, ui) {
                    $(this).append(ui.draggable); // Move a pequena div para o novo container
                    ui.draggable.css({ top: "0", left: "0", position: "relative" }); // Reseta a posição da pequena div dentro do novo container
                },
                // over: function (event, ui) {
                //     $(this).addClass("ui-state-highlight");
                // },
                // out: function (event, ui) {
                //     $(this).removeClass("ui-state-highlight");
                // }
            });
        });
    </script>

</body>

</html>